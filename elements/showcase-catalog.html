{% if products|length > 0 %}
    <div class="showcase-catalog clearfix col-sm-12 col-md-12" itemscope itemtype="https://schema.org/SomeProducts">
        <ul class="row" itemscope itemtype="https://schema.org/SomeProducts">
        {% for product in products %}
            {% set ranking = product.ranking %}
            <li class="col-sm-4">
                {% element 'snippets/product' {"product": product} %}
            </li>
            
            {% if loop.index is divisible by(3) %}
            </ul><ul class="row" itemscope itemtype="https://schema.org/SomeProducts">
            {% endif %}
        {% endfor %}
        </ul>
    </div>
{% endif %}